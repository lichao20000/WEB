<%@ include file="../timelater.jsp"%>
<%@ page contentType="text/html;charset=GBK"%>
<%@ page import="com.linkage.module.gwms.dao.tabquery.CityDAO"%>
<html>
<head>
<title>网络拓扑--地图</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
</head>
<%
	String user_cityID = curUser.getCityId();    
	ArrayList cityIDs = CityDAO.getNextCityIdsByCityPid(user_cityID);
	
    //	增加对县级用户，把他的parent_id放入回话中
	if(1==cityIDs.size())
	{
	   //判断当前用户是否县级用户，如是，则能查询到记录
	   String sql ="select parent_id from tab_city where city_id ='"+user_cityID+"' and parent_id not in(select city_id from tab_city where parent_id not in (select city_id from tab_city))";	   
	   HashMap result = DataSetBean.getRecord(sql);	 
	   if(null!=result)
	   {
		   String parent_id = (String)result.get("parent_id");
		   cityIDs.add(parent_id);		   
	   }		
	}   
    
	//得到tab_accounts表中得到parent_id，默认topo层。
	//parent_id为：1/jinan/0,1/zibo/0,1/2345。
	String parentid = user.getParentID();
	//当parentid值不为空
	//  1/0为网络视图 
	//当前用户的parentid为空时，就需要任何处理
	if(parentid.equals("1/0") || parentid.equals("") || parentid.equals("null")){
	}
	else{
		response.sendRedirect("./main_map.jsp?type=1&oid=" + parentid);	    
	}
	
%>
<script language=javascript>
function hide()
{
	if(isIE)
	{
		var fm = window.top.document.getElementById('frame');
		var img = window.top.frames[2];
		
		//存在则执行
		if(typeof(fm) != "undefined" && fm != null){
			fm.cols = "1,*";
		}
		
		//存在则执行
		if(typeof(img) != "undefined" && img != null){
			img = img.document.getElementById('showImg');
			img.style.display='inline';
		}
	}
}

function Ifgo(v){
	var cityList = <%=cityIDs%>;
	var oid = "";
	var flag = false;
	
	var n = cityList.length;
	for(i=0;i<n;i++){
		if(v==cityList[i]){
			flag = true;
			break;
		}
	}
	
	if(flag){
		oid = getCityName(v);
		location.href="./main_map.jsp?type=1&oid=1/"+oid+"/0" + "&city_id=" + v;//oid 格式为 1/属地的汉语拼音/0		
	}		
	else
		alert("对不起，您无权查看此地市");
}

function getCityName(v){
		var cityName = "";
		switch (v)
		{
			case '00':
			  cityName = "szx";
			  break	
			case '01':
			  cityName = "jinan";
			  break			
			case '02':
			  cityName = "qingdao";
			  break
			case '03':
			  cityName = "yantai";
			  break
			case '04':
			  cityName = "weifang";
			  break
			case '05':
			  cityName = "zibo";
			  break
			case '06':
			  cityName = "weihai";
			  break
			case '07':
			  cityName = "jining";
			  break
			case '08':
			  cityName = "taian";
			  break
			case '09':
			  cityName = "dezhou";
			  break
			case '10':
			  cityName = "linyi";
			  break
			case '11':
			  cityName = "zaozhuang";
			  break
			case '12':
			  cityName = "heze";
			  break
			case '13':
			  cityName = "liaocheng";
			  break
			case '14':
			  cityName = "binzhou";
			  break
			case '15':
			  cityName = "dongying";
			  break
			case '16':
			  cityName = "rizhao";
			  break
			case '17':
			  cityName = "laiwu";
			  break
		}
		return cityName;
}

var isNC6 = (document.getElementById && !document.all)?true:false;
var isIE = (document.all)?true:false;
</script>
<!--onload="hide();"-->
<body  leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
	
<table width="100%" border="0" cellspacing="0" cellpadding="0" height="100%" background="images/top_background.gif">
  <tr> 
    <td height="40%">&nbsp;</td>
  </tr>
  <tr>
    <td height="20%" >
      <div align="center"><img src="./images/SD.gif" width="640" height="430" border="0" usemap="#Map" > 
        <map name="Map"> 
          <area shape="poly" coords="56,271,56,251,66,230,60,215,50,194,60,179,68,162,80,157,90,146,100,147,108,152,120,147,128,134,136,141,144,142,142,155,140,174,140,191,144,200,150,203,128,224,114,237,98,248,88,249,72,260,56,269" 
          href="javaScript:Ifgo('13');" alt="聊城" title="聊城">
          <area shape="poly" coords="2,358,12,345,24,326,36,313,56,300,64,279,80,274,90,263,96,264,102,271,114,278,116,297,116,306,124,309,124,324,128,331,128,336,118,349,118,360,124,369,134,376,138,379,138,390,136,399,130,400,126,405,100,406,90,405,84,402,80,405,70,404,62,399,62,384,56,377,50,374,42,365,38,360,30,357,20,358,4,357" 
          href="javaScript:Ifgo('12');" alt="荷泽" title="荷泽">
          <area shape="poly" coords="558,166,556,157,566,154,568,149,578,142,580,137,584,134,590,137,588,144,596,141,598,134,602,127,602,134,598,141,606,144,600,147,602,152,616,151,620,148,618,143,624,142,628,137,630,128,620,133,622,124,620,119,628,118,634,111,630,104,632,99,630,94,638,91,634,86,626,89,624,94,620,89,610,88,602,83,598,86,594,81,594,74,590,73,578,88,566,105,564,120,552,123,540,124,532,121,524,126,522,135,522,138,534,147,536,154,542,159,548,154,552,151,546,162,552,161,558,164" 
          href="javaScript:Ifgo('06');" alt="威海" title="威海">
          <area shape="poly" coords="392,127,396,136,402,139,420,140,428,137,444,136,446,127,454,126,462,127,468,120,470,131,474,136,470,143,474,148,474,157,472,166,480,175,478,184,488,181,490,186,494,181,498,186,504,189,502,196,500,201,498,204,494,197,488,198,484,207,488,212,480,211,482,216,484,225,484,232,476,237,466,242,452,243,456,236,458,227,452,218,452,231,448,226,442,227,438,226,436,233,440,240,444,251,452,248,444,261,438,260,432,267,432,280,424,277,424,292,418,293,416,288,410,293,406,294,396,293,392,284,398,283,398,270,408,263,404,256,402,249,402,244,402,233,412,232,416,219,422,208,424,203,428,196,420,191,408,188,398,181,392,172,392,163,396,152,394,141,392,124" 
          href="javaScript:Ifgo('02');" alt="青岛" title="青岛">
          <area shape="poly" coords="414,98,418,109,410,116,406,127,394,128,402,139,418,140,438,135,444,134,448,127,460,126,470,119,472,132,472,145,474,148,474,157,472,164,480,175,478,184,490,179,500,176,504,179,502,184,512,181,522,172,536,167,542,162,538,155,534,146,524,139,524,128,532,121,538,124,556,121,566,116,566,105,578,90,578,83,564,84,554,89,544,86,534,73,540,70,532,67,530,74,518,73,514,60,508,59,500,54,498,47,484,48,468,55,460,56,454,61,442,62,442,65,450,66,450,73,442,84,430,91,414,96" 
          href="javaScript:Ifgo('03');" alt="烟台" title="烟台">
          <area shape="poly" coords="306,147,312,144,314,137,310,134,320,129,318,120,330,109,348,112,360,121,362,126,372,129,390,126,394,139,396,154,392,167,396,176,408,187,420,190,428,197,416,222,412,233,400,232,400,241,404,248,404,255,408,262,400,269,398,282,392,279,388,270,378,273,378,262,374,259,364,262,364,251,352,252,352,241,346,238,338,241,334,228,328,231,328,234,318,233,308,242,306,233,302,238,300,227,294,220,290,207,286,194,284,181,288,172,296,167,306,158,306,147" 
          href="javaScript:Ifgo('04');" alt="潍坊" title="潍坊">
          <area shape="poly" coords="318,318,332,319,346,322,352,319,364,328,362,341,366,346,378,351,380,344,386,325,394,318,400,303,400,294,392,291,392,280,388,271,378,272,378,261,368,260,362,259,362,252,354,251,348,248,338,251,338,258,332,261,326,272,326,279,332,284,326,299,330,308,318,317" 
          href="javaScript:Ifgo('16');" alt="日照" title="日照">
          <area shape="poly" coords="130,96,118,95,110,100,100,121,90,144,100,147,110,150,122,143,128,136,138,141,144,140,140,167,140,182,142,197,150,202,158,189,168,168,180,157,184,150,182,135,182,128,194,121,190,106,192,91,202,86,210,79,212,70,216,59,216,66,222,65,226,66,232,59,230,54,236,47,230,38,232,27,222,42,210,45,196,44,182,45,176,44,168,55,158,68,150,77,144,82,136,71,132,74,132,83,128,88,128,93" 
          href="javaScript:Ifgo('09');" alt="德州" title="德州">
          <area shape="poly" coords="246,0,244,7,248,4,250,7,252,14,240,21,232,30,232,37,236,46,230,55,230,64,220,65,216,64,210,81,218,94,222,109,222,118,224,125,214,134,216,141,228,144,234,149,234,156,244,167,248,174,254,171,254,158,262,153,262,146,256,137,242,132,234,125,242,110,256,111,268,104,272,117,274,128,278,133,280,140,290,139,294,132,296,119,292,104,282,97,278,90,280,81,280,68,290,67,296,54,294,45,286,34,284,21,280,18,278,31,270,28,266,15,262,12,264,5,258,0,254,7,248,4" 
          href="javaScript:Ifgo('14');" alt="滨州" title="滨州">
          <area shape="poly" coords="316,13,318,20,310,27,306,24,306,17,300,16,294,21,288,18,286,31,294,40,296,51,292,64,280,65,280,82,280,87,284,94,294,103,296,114,296,127,290,138,294,141,300,142,308,145,314,136,312,131,320,126,318,117,328,108,338,107,338,102,338,95,342,78,348,63,356,60,354,53,352,42,344,29,338,14,326,11,316,12" 
          href="javaScript:Ifgo('15');" alt="东营" title="东营">
          <area shape="poly" coords="111,252,99,257,99,266,109,275,115,280,117,301,117,306,125,309,125,324,129,333,121,344,119,359,127,372,137,381,147,372,159,369,173,370,183,381,179,362,175,349,175,342,187,339,199,336,211,329,217,326,223,331,225,322,225,315,223,310,229,301,235,300,233,291,227,280,217,275,205,276,193,273,183,276,181,283,173,284,163,283,155,280,163,273,157,266,163,257,159,258,149,267,139,272,129,271,125,262,115,259,109,252" 
          href="javaScript:Ifgo('07');" alt="济宁" title="济宁">
          <area shape="poly" coords="187,223,177,220,171,215,155,218,147,227,153,234,151,241,141,242,131,245,125,244,125,231,135,220,151,207,155,196,163,181,169,168,185,151,183,136,183,127,193,122,191,101,195,90,211,79,217,94,223,111,221,118,223,125,213,134,219,141,229,144,235,155,243,166,245,173,245,188,247,195,235,190,227,197,219,202,211,199,199,212,187,223" 
          href="javaScript:Ifgo('01');" alt="济南" title="济南">
          <area shape="poly" coords="263,254,269,253,279,246,291,257,301,252,307,253,309,242,307,233,303,238,301,227,295,220,287,197,285,182,289,171,297,166,307,157,307,148,297,143,291,140,283,141,275,128,271,113,269,104,259,109,245,112,235,125,237,130,249,133,261,142,263,151,257,156,253,171,247,172,243,183,245,196,257,207,263,220,261,235,261,250" 
          href="javaScript:Ifgo('05');" alt="淄博" title="淄博">
          <area shape="poly" coords="224,241,226,234,222,227,220,216,214,207,214,198,220,201,230,194,236,189,246,196,254,203,262,212,264,221,260,244,260,251,248,248,242,247,234,240,224,239" 
          href="javaScript:Ifgo('17');" alt="莱芜" title="莱芜">
          <area shape="poly" coords="256,278,250,283,240,284,234,291,226,280,212,275,200,274,186,273,182,282,168,283,156,280,162,273,158,264,164,259,158,256,148,267,136,272,130,271,124,260,116,259,110,252,114,239,124,232,124,241,130,244,136,243,150,240,152,233,146,224,156,219,172,216,182,223,194,214,206,205,212,198,216,207,222,216,222,225,226,240,234,241,244,248,258,251,268,254,266,263,258,264,256,277" 
          href="javaScript:Ifgo('08');" alt="泰安" title="泰安">
          <area shape="poly" coords="252,412,242,413,232,418,222,411,218,408,208,421,200,422,198,401,192,398,184,383,182,364,176,349,174,342,196,337,210,332,216,327,226,334,234,343,244,354,246,369,248,378,252,387,254,398,252,411" 
          href="javaScript:Ifgo('11');" alt="枣庄" title="枣庄">
          <area shape="poly" coords="332,390,328,393,310,394,304,419,292,424,284,427,280,416,284,409,276,408,278,399,270,398,264,395,260,400,254,399,254,386,246,371,246,356,222,331,226,314,222,309,230,300,234,299,234,292,240,283,252,282,258,277,258,264,266,263,268,252,278,247,290,256,300,251,306,254,310,239,320,234,326,233,332,228,340,239,348,238,352,243,346,250,340,255,332,262,326,271,328,280,332,285,328,300,330,309,320,316,326,319,342,322,352,319,362,324,364,329,364,342,368,347,360,354,344,353,340,362,340,367,334,374,332,389" 
          href="javaScript:Ifgo('10');" alt="临沂" title="临沂">
          <area shape="poly" coords="529,383,548,360,557,350,570,341,580,328,593,328,598,315,582,315,566,303,547,325,539,319,542,309,543,298,534,302,529,296,522,300,505,304,481,334,481,354,471,369,486,377,495,378,503,370,511,384,517,382,524,377"
          href="javaScript:Ifgo('00');" alt="省中心" title="省中心">
        </map> 
      </div>
    </td>
  </tr>
  <tr>
    <td height="40%">&nbsp;</td>
  </tr>
</table>
</body>
</html>
